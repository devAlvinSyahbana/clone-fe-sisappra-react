"use strict";(self.webpackChunkSISAPPRA=self.webpackChunkSISAPPRA||[]).push([[311],{6311:function(a,n,e){e.r(n),e.d(n,{default:function(){return R}});var r=e(2791),s=e(6871),t=e(4880),l=e(1413),i=e(5861),o=e(885),c=e(4687),u=e.n(c),d=e(4569),m=e.n(d),p=e(3504),f=e(3513),h=e(6144),v=e(1230),x=e(9546),j=e(3360),b=e(662),g=e(1830),_=e.n(g),k=e(9353),N=e.n(k),w=e(184),Z="https://sisappra-be.tsgitdev.com",y="".concat(Z,"/sarana-prasarana");function S(){var a=(0,s.s0)(),n=(0,r.useState)({label:"",value:null}),e=(0,o.Z)(n,2),t=e[0],c=e[1],d=(0,r.useState)({label:"",value:null}),g=(0,o.Z)(d,2),k=g[0],S=g[1],P=(0,r.useState)({label:"",value:null}),C=(0,o.Z)(P,2),F=C[0],L=C[1],O=(0,r.useState)(!1),A=(0,o.Z)(O,2),D=A[0],T=A[1],B=(0,r.useState)([]),U=(0,o.Z)(B,2),K=U[0],J=U[1],I=(0,r.useState)(!1),R=(0,o.Z)(I,2),V=R[0],W=R[1],E=(0,r.useState)(0),M=(0,o.Z)(E,2),q=M[0],z=M[1],G=(0,r.useState)(10),H=(0,o.Z)(G,2),Y=H[0],Q=H[1],X=(0,r.useState)({strparam:""}),$=(0,o.Z)(X,2),aa=$[0],na=$[1];(0,r.useEffect)((function(){function a(){return(a=(0,i.Z)(u().mark((function a(n){var e;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return W(!0),a.next=3,m().get("".concat(y,"/filter?limit=").concat(Y,"&offset=").concat(n).concat(aa.strparam));case 3:e=a.sent,J(e.data.data),z(e.data.total_data),W(!1);case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(n){a.apply(this,arguments)}(1)}),[aa,Y]);var ea=function(a){return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"alert alert-primary d-flex align-items-center p-5 mb-10",children:[(0,w.jsx)("span",{className:"spinner-border spinner-border-xl align-middle me-3"}),(0,w.jsx)("div",{className:"d-flex flex-column",children:(0,w.jsx)("h5",{className:"mb-1",children:"Sedang mengambil data..."})})]})})},ra=[{name:"Jenis Sarana & Prasarana",selector:function(a){return a.jenis_sarana_prasarana},sortable:!0,sortField:"jenis_sarana_prasarana"},{name:"Status Sarana & Prasarana",selector:function(a){return a.status_sarana_prasarana},sortable:!0,sortField:"status_sarana_prasarana"},{name:"Jumlah",selector:function(a){return a.jumlah},sortable:!0,sortField:"jumlah"},{name:"Kondisi",selector:function(a){return a.kondisi},sortable:!0,sortField:"kondisi"},{name:"Keterangan",selector:function(a){return a.keterangan},sortable:!0,sortField:"keterangan"},{name:"Dokumentasi",selector:function(a){return a.dokumentasi},sortable:!1,cell:function(a){return(0,w.jsx)("a",{target:"_blank",rel:"noreferrer",href:"".concat(Z,"/").concat(a.dokumentasi),className:"btn-link",children:"Lihat"})}},{name:"Aksi",sortable:!1,text:"Action",className:"action",center:!0,cell:function(n){return(0,w.jsx)(r.Fragment,{children:(0,w.jsx)("div",{className:"mb-2 mt-2",children:[x.Z].map((function(e,r){return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(e,{as:h.Z,id:"dropdown-button-drop-".concat(r),size:"sm",variant:"light",title:"Aksi",children:[(0,w.jsx)(v.Z.Item,{href:"#",onClick:function(){return a("/sarana_prasarana/LaporanSaranaPrasarana/LihatLaporanSarana/"+n.id,{replace:!0})},children:"Detail"}),(0,w.jsx)(v.Z.Item,{href:"#",onClick:function(){return a("/sarana_prasarana/LaporanSaranaPrasarana/UbahLaporanSarana/"+n.id,{replace:!0})},children:"Ubah"}),(0,w.jsx)(v.Z.Item,{href:"#",onClick:function(){return a=n.id,void _().fire({title:"Anda yakin?",text:"Ingin menghapus data ini",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya!",cancelButtonText:"Tidak!"}).then(function(){var n=(0,i.Z)(u().mark((function n(e){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isConfirmed){n.next=5;break}return n.next=3,m().delete("".concat(y,"/delete/").concat(a));case 3:n.sent?(sa(1),_().fire({icon:"success",title:"Data berhasil dihapus",showConfirmButton:!1,timer:1500})):_().fire({icon:"error",title:"Data gagal dihapus, harap mencoba lagi",showConfirmButton:!1,timer:1500});case 5:case"end":return n.stop()}}),n)})));return function(a){return n.apply(this,arguments)}}());var a},children:"Hapus"})]},r)})}))})})}}],sa=function(){var a=(0,i.Z)(u().mark((function a(n){var e;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return W(!0),a.next=3,m().get("".concat(y,"/filter?limit=").concat(Y,"&offset=").concat(n).concat(aa.strparam));case 3:return e=a.sent,J(e.data.data),z(e.data.total_data),W(!1),a.abrupt("return",[K,J]);case 8:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),ta=function(){var a=(0,i.Z)(u().mark((function a(n,e){var r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return W(!0),a.next=3,m().get("".concat(y,"/filter?limit=").concat(Y,"&offset=").concat(e).concat(aa.strparam));case 3:r=a.sent,J(r.data.data),Q(n),W(!1);case 7:case"end":return a.stop()}}),a)})));return function(n,e){return a.apply(this,arguments)}}(),la=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(y,"/findjenis/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.jenis_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),ia=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(y,"/findstatus/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.status_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),oa=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(y,"/findkondisi/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.kondisi_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),ca=function(){var a=(0,i.Z)(u().mark((function a(){var n;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n="",t.value&&(n+="&jenis_sarana_prasarana=".concat(t.value)),k.value&&(n+="&status_sarana_prasarana=".concat(k.value)),F.value&&(n+="&kondisi_sarana_prasarana=".concat(F.value)),na((function(a){return(0,l.Z)((0,l.Z)({},a),{},{strparam:n})}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),ua=function(){var a=(0,i.Z)(u().mark((function a(){return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return T(!0),a.next=3,m()({url:"".concat(y,"/unduh?q=1").concat(aa.strparam),method:"GET",responseType:"blob"}).then((function(a){N()(a.data,"DATA SARANA DAN PRASARANA.xlsx"),T(!1)}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"card",children:[(0,w.jsx)("div",{className:"row g-8 mt-2 ms-5 me-5",children:(0,w.jsx)("div",{className:"col-md-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jenis Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,value:t.value?t:{value:"",label:"Pilih"},loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,la(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){c((function(n){return(0,l.Z)((0,l.Z)({},n),a)}))},placeholder:"Pilih"})]})})}),(0,w.jsx)("div",{className:"row g-8 mt-2 ms-5 me-5",children:(0,w.jsx)("div",{className:"col-md-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Status Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,value:k.value?k:{value:"",label:"Pilih"},loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,ia(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){S((function(n){return(0,l.Z)((0,l.Z)({},n),a)}))},placeholder:"Pilih"})]})})}),(0,w.jsx)("div",{className:"row g-8 mt-2 ms-5 me-5",children:(0,w.jsx)("div",{className:"col-md-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Kondisi"}),(0,w.jsx)(b.Z,{cacheOptions:!0,value:F.value?F:{value:"",label:"Pilih"},loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,oa(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){L((function(n){return(0,l.Z)((0,l.Z)({},n),a)}))},placeholder:"Pilih"})]})})}),(0,w.jsxs)("div",{className:"row g-8 mt-2 ms-5 me-5",children:[(0,w.jsxs)("div",{className:"col-md-6 col-lg-6 col-sm-12",children:[(0,w.jsx)(p.rU,{to:"#",onClick:ca,className:"me-2",children:(0,w.jsxs)("button",{className:"btn btn-primary me-2",children:[(0,w.jsx)("i",{className:"fa-solid fa-search"}),"Cari"]})}),(0,w.jsx)(p.rU,{to:"#",onClick:function(){c({label:"",value:null}),S({label:"",value:null}),L({label:"",value:null}),na((function(a){return(0,l.Z)((0,l.Z)({},a),{},{strparam:""})}))},children:(0,w.jsxs)("button",{className:"btn btn-primary",children:[(0,w.jsx)("i",{className:"fa-solid fa-arrows-rotate"}),"Reset"]})})]}),(0,w.jsxs)("div",{className:"d-flex justify-content-end col-md-6 col-lg-6 col-sm-12",children:[(0,w.jsx)(p.rU,{to:"/sarana_prasarana/LaporanSaranaPrasarana/TambahLaporanSarana",children:(0,w.jsxs)(j.Z,{variant:"primary",children:[(0,w.jsx)("span",{className:"svg-icon svg-icon-2",children:(0,w.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("rect",{opacity:"0.5",x:"11.364",y:"20.364",width:16,height:2,rx:1,transform:"rotate(-90 11.364 20.364)",fill:"currentColor"}),(0,w.jsx)("rect",{x:"4.36396",y:"11.364",width:16,height:2,rx:1,fill:"currentColor"})]})}),"Tambah Sarana"]})}),"\xa0",(0,w.jsxs)(v.Z,{as:h.Z,children:[(0,w.jsx)(j.Z,{variant:"light",children:D?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"spinner-border spinner-border-md align-middle me-3"})," ","Memproses..."]}):"Unduh"}),(0,w.jsx)(v.Z.Toggle,{split:!0,variant:"light",id:"dropdown-split-basic"}),(0,w.jsxs)(v.Z.Menu,{children:[(0,w.jsx)(v.Z.Item,{onClick:ua,children:"Excel"}),(0,w.jsx)(v.Z.Item,{children:"PDF"})]})]})]})]}),(0,w.jsx)("div",{className:"table-responsive mt-5 ms-5 me-5",children:(0,w.jsx)(f.ZP,{columns:ra,data:K,progressPending:V,progressComponent:(0,w.jsx)(ea,{}),pagination:!0,paginationServer:!0,paginationTotalRows:q,onChangeRowsPerPage:ta,onChangePage:function(a){sa(a)}})})]})})}var P=e(4942),C=e(3027),F=e(6864),L="".concat("https://sisappra-be.tsgitdev.com","/sarana-prasarana");function O(){var a=(0,s.s0)(),n=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(L,"/findjenis/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.jenis_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),e=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(L,"/findstatus/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.status_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),t=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(L,"/findkondisi/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.kondisi_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),c=r.useState({}),d=(0,o.Z)(c,2),f=d[0],h=d[1],v=function(a,n){h((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,P.Z)({},n,a))}))},x=function(a){h((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,P.Z)({},a.target.name,a.target.value))}))},j=(0,F.TA)({initialValues:{jenis_sarana_prasarana:{value:"",label:"Pilih"},status_sarana_prasarana:{value:"",label:"Pilih"},jumlah:0,kondisi:{value:"",label:"Pilih"},keterangan:""},onSubmit:function(){var n=(0,i.Z)(u().mark((function n(e){var r,s,t,l,i,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(N),l=new FormData,i={jenis_sarana_prasarana:null!==f&&void 0!==f&&null!==(r=f.jenis_sarana_prasarana)&&void 0!==r&&r.value?f.jenis_sarana_prasarana.value:0,status_sarana_prasarana:null!==f&&void 0!==f&&null!==(s=f.status_sarana_prasarana)&&void 0!==s&&s.value?f.status_sarana_prasarana.value:0,kondisi:null!==f&&void 0!==f&&null!==(t=f.kondisi)&&void 0!==t&&t.value?f.kondisi.value:0,keterangan:null!==f&&void 0!==f&&f.keterangan?f.keterangan:"",jumlah:null!==f&&void 0!==f&&f.jumlah?f.jumlah:0,created_by:""},n.prev=3,n.next=6,m().post("".concat(L,"/create"),i);case 6:if(!(o=n.sent)){n.next=17;break}if(!N){n.next=15;break}return l.append("file_dokumentasi",N),n.next=12,m().post("".concat(L,"/upload-file/").concat(o.data.data.return_id),l);case 12:return n.sent&&(console.log("File success uploaded!"),_().fire({icon:"success",title:"Data berhasil disimpan",showConfirmButton:!1,timer:1500}),a("/sarana_prasarana/LaporanSaranaPrasarana",{replace:!0})),n.abrupt("return");case 15:_().fire({icon:"success",title:"Data berhasil disimpan",showConfirmButton:!1,timer:1500}),a("/sarana_prasarana/LaporanSaranaPrasarana",{replace:!0});case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(3),_().fire({icon:"error",title:"Data gagal disimpan, harap mencoba lagi",showConfirmButton:!1,timer:1500}),console.error(n.t0);case 23:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(a){return n.apply(this,arguments)}}()}),g=(0,r.useState)(null),k=(0,o.Z)(g,2),N=k[0],Z=k[1];return(0,w.jsx)("div",{className:"app-main flex-column flex-row-fluid",id:"kt_app_main",children:(0,w.jsx)("div",{className:"d-flex flex-column flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content",className:"app-content flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content_container",className:"app-container container-xxl",children:(0,w.jsx)("div",{className:"card mb-3 mb-xl-2",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("form",{onSubmit:j.handleSubmit,children:[(0,w.jsxs)("div",{className:"row mt-2",children:[(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jenis Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,e){setTimeout((0,i.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e,r.next=3,n(a);case 3:r.t1=r.sent,(0,r.t0)(r.t1);case 5:case"end":return r.stop()}}),r)}))),1e3)},defaultOptions:!0,onChange:function(a){return v(a,"jenis_sarana_prasarana")},value:null!==f&&void 0!==f&&f.jenis_sarana_prasarana?null===f||void 0===f?void 0:f.jenis_sarana_prasarana:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Status Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=n,r.next=3,e(a);case 3:r.t1=r.sent,(0,r.t0)(r.t1);case 5:case"end":return r.stop()}}),r)}))),1e3)},defaultOptions:!0,onChange:function(a){return v(a,"status_sarana_prasarana")},value:null!==f&&void 0!==f&&f.status_sarana_prasarana?null===f||void 0===f?void 0:f.status_sarana_prasarana:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Kondisi"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){return v(a,"kondisi")},value:null!==f&&void 0!==f&&f.kondisi?null===f||void 0===f?void 0:f.kondisi:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jumlah"}),(0,w.jsx)("input",{className:"form-control form-control form-control-solid",name:"jumlah",type:"number",min:"0",onChange:x,onBlur:j.handleBlur,value:null===f||void 0===f?void 0:f.jumlah})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"File Dokumentasi"}),(0,w.jsx)(C.Z.Control,{type:"file",className:"form-control form-control-solid",id:"firstimg",onChange:function(a){return Z(a.target.files[0])},accept:"image/jpeg,image/png,application/pdf"}),(0,w.jsx)("small",{className:"mt-4",children:"*File yang dapat di upload berformat (.pdf, .jpeg, .png)"})]})}),(0,w.jsx)("div",{className:"col-12 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"Keterangan"}),(0,w.jsx)(C.Z.Control,{as:"textarea",name:"keterangan",className:"form-control form-control-solid",onChange:x,value:null===f||void 0===f?void 0:f.keterangan})]})})]}),(0,w.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-center",children:[(0,w.jsx)(p.rU,{to:"/sarana_prasarana/LaporanSaranaPrasarana",children:(0,w.jsxs)("button",{className:"btn btn-secondary",children:[(0,w.jsx)("i",{className:"fa-solid fa-arrow-left"}),"Kembali"]})}),(0,w.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[(0,w.jsx)("i",{className:"fa-solid fa-paper-plane"}),"Simpan"]})]})]})})})})})})})}var A=e(2930),D="https://sisappra-be.tsgitdev.com",T="".concat(D,"/sarana-prasarana");function B(){var a,n,e,t=(0,s.s0)(),c=(0,s.UO)().id,d=(0,r.useState)(null),f=(0,o.Z)(d,2),h=f[0],v=f[1],x=r.useState({}),j=(0,o.Z)(x,2),g=j[0],k=j[1],N=r.useState({}),Z=(0,o.Z)(N,2),y=Z[0],S=Z[1];(0,r.useEffect)((function(){var a=function(){var a=(0,i.Z)(u().mark((function a(){var n,e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(T,"/findone/").concat(c));case 2:n=a.sent,e=n.data.data,r={jenis_sarana_prasarana:{value:e.jenis_sarana_prasarana_id,label:e.jenis_sarana_prasarana_name},status_sarana_prasarana:{value:e.status_sarana_prasarana_id,label:e.status_sarana_prasarana_name},kondisi:{value:e.kondisi_id,label:e.kondisi_name},jumlah:e.jumlah,keterangan:e.keterangan,file_dokumentasi:e.dokumentasi,updated_by:""},S((function(a){return(0,l.Z)((0,l.Z)({},a),r)}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a()}),[g,c]);var L=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(T,"/findjenis/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.jenis_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),O=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(T,"/findstatus/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.status_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),B=function(){var a=(0,i.Z)(u().mark((function a(n){var e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(T,"/findkondisi/").concat(n));case 2:return e=a.sent,a.next=5,e.data.data;case 5:return r=a.sent,a.abrupt("return",r.map((function(a){return{label:a.kondisi_sarana_prasarana,value:a.id}})));case 7:case"end":return a.stop()}}),a)})));return function(n){return a.apply(this,arguments)}}(),U=function(a,n){k((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,P.Z)({},n,a))}))},K=function(a){k((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,P.Z)({},a.target.name,a.target.value))}))},J=(0,F.TA)({initialValues:{jenis_sarana_prasarana:{value:"",label:"Pilih"},status_sarana_prasarana:{value:"",label:"Pilih"},jumlah:0,kondisi:{value:"",label:"Pilih"},keterangan:""},onSubmit:function(){var a=(0,i.Z)(u().mark((function a(n){var e,r,s,l,i,o,d,p;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return d=new FormData,p={jenis_sarana_prasarana:null!==g&&void 0!==g&&null!==(e=g.jenis_sarana_prasarana)&&void 0!==e&&e.value?g.jenis_sarana_prasarana.value:null!==y&&void 0!==y&&null!==(r=y.jenis_sarana_prasarana)&&void 0!==r&&r.value?y.jenis_sarana_prasarana.value:0,status_sarana_prasarana:null!==g&&void 0!==g&&null!==(s=g.status_sarana_prasarana)&&void 0!==s&&s.value?g.status_sarana_prasarana.value:null!==y&&void 0!==y&&null!==(l=y.status_sarana_prasarana)&&void 0!==l&&l.value?y.status_sarana_prasarana.value:0,kondisi:null!==g&&void 0!==g&&null!==(i=g.kondisi)&&void 0!==i&&i.value?g.kondisi.value:null!==y&&void 0!==y&&null!==(o=y.kondisi)&&void 0!==o&&o.value?y.kondisi.value:0,keterangan:null!==g&&void 0!==g&&g.keterangan?g.keterangan:null!==y&&void 0!==y&&y.keterangan?y.keterangan:"",jumlah:null!==g&&void 0!==g&&g.jumlah?g.jumlah:null!==y&&void 0!==y&&y.jumlah?y.jumlah:0,updated_by:""},a.prev=2,a.next=5,m().put("".concat(T,"/update/").concat(c),p);case 5:if(!a.sent){a.next=16;break}if(!h){a.next=14;break}return d.append("file_dokumentasi",h),a.next=11,m().post("".concat(T,"/upload-file/").concat(c),d);case 11:return a.sent&&(console.log("File success uploaded!"),_().fire({icon:"success",title:"Data berhasil disimpan",showConfirmButton:!1,timer:1500}),t("/sarana_prasarana/LaporanSaranaPrasarana",{replace:!0})),a.abrupt("return");case 14:_().fire({icon:"success",title:"Data berhasil disimpan",showConfirmButton:!1,timer:1500}),t("/sarana_prasarana/LaporanSaranaPrasarana",{replace:!0});case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(2),_().fire({icon:"error",title:"Data gagal disimpan, harap mencoba lagi",showConfirmButton:!1,timer:1500}),console.error(a.t0);case 22:case"end":return a.stop()}}),a,null,[[2,18]])})));return function(n){return a.apply(this,arguments)}}()});return(0,w.jsx)("div",{className:"app-main flex-column flex-row-fluid",id:"kt_app_main",children:(0,w.jsx)("div",{className:"d-flex flex-column flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content",className:"app-content flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content_container",className:"app-container container-xxl",children:(0,w.jsx)("div",{className:"card mb-3 mb-xl-2",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("form",{onSubmit:J.handleSubmit,children:[(0,w.jsxs)("div",{className:"row mt-2",children:[(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jenis Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,L(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){return U(a,"jenis_sarana_prasarana")},value:null!==g&&void 0!==g&&g.jenis_sarana_prasarana?null===g||void 0===g?void 0:g.jenis_sarana_prasarana:0!==(null===y||void 0===y||null===(a=y.jenis_sarana_prasarana)||void 0===a?void 0:a.value)?null===y||void 0===y?void 0:y.jenis_sarana_prasarana:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Status Sarana & Prasarana"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,O(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){return U(a,"status_sarana_prasarana")},value:null!==g&&void 0!==g&&g.status_sarana_prasarana?null===g||void 0===g?void 0:g.status_sarana_prasarana:0!==(null===y||void 0===y||null===(n=y.status_sarana_prasarana)||void 0===n?void 0:n.value)?null===y||void 0===y?void 0:y.status_sarana_prasarana:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Kondisi"}),(0,w.jsx)(b.Z,{cacheOptions:!0,loadOptions:function(a,n){setTimeout((0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,B(a);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),1e3)},defaultOptions:!0,onChange:function(a){return U(a,"kondisi")},value:null!==g&&void 0!==g&&g.kondisi?null===g||void 0===g?void 0:g.kondisi:0!==(null===y||void 0===y||null===(e=y.kondisi)||void 0===e?void 0:e.value)?null===y||void 0===y?void 0:y.kondisi:{value:"",label:"Pilih"},placeholder:"Pilih"})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jumlah"}),(0,w.jsx)("input",{className:"form-control form-control form-control-solid",name:"jumlah",type:"number",min:"0",onChange:K,onBlur:J.handleBlur,value:null!==g&&void 0!==g&&g.jumlah||0===(null===g||void 0===g?void 0:g.jumlah)?null===g||void 0===g?void 0:g.jumlah:null!==y&&void 0!==y&&y.jumlah?null===y||void 0===y?void 0:y.jumlah:0})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"File Dokumentasi"}),(0,w.jsx)(C.Z.Control,{type:"file",className:"form-control form-control-solid",id:"firstimg",onChange:function(a){return v(a.target.files[0])},accept:"image/jpeg,image/png,application/pdf"}),(0,w.jsx)("small",{className:"mt-4",children:"*File yang dapat di upload berformat (.pdf, .jpeg, .png)"}),null!==y&&void 0!==y&&y.file_dokumentasi&&""!==(null===y||void 0===y?void 0:y.file_dokumentasi)?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"card h-100 mt-3",children:(0,w.jsx)("div",{className:"card-body d-flex justify-content-center text-center flex-column p-4 border-gray-300 border-dotted",children:(0,w.jsxs)("a",{className:"text-gray-800 text-hover-primary d-flex flex-column",target:"_blank",rel:"noreferrer",href:"".concat(D,"/").concat(null===y||void 0===y?void 0:y.file_dokumentasi),children:[(0,w.jsxs)("div",{className:"symbol symbol-75px mb-5",children:[(0,w.jsx)(A.D8,{className:"theme-light-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil003.svg"}),(0,w.jsx)(A.D8,{className:"theme-dark-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil003.svg"})]}),(0,w.jsx)("div",{className:"fs-5 fw-bold mb-2",children:"File Dokumentasi"})]})})})}):null]})}),(0,w.jsx)("div",{className:"col-12 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"Keterangan"}),(0,w.jsx)(C.Z.Control,{as:"textarea",name:"keterangan",className:"form-control form-control-solid",onChange:K,value:null!==g&&void 0!==g&&g.keterangan||""===(null===g||void 0===g?void 0:g.keterangan)?null===g||void 0===g?void 0:g.keterangan:null!==y&&void 0!==y&&y.keterangan?null===y||void 0===y?void 0:y.keterangan:""})]})})]}),(0,w.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-center",children:[(0,w.jsx)(p.rU,{to:"/sarana_prasarana/LaporanSaranaPrasarana",children:(0,w.jsxs)("button",{className:"btn btn-secondary",children:[(0,w.jsx)("i",{className:"fa-solid fa-arrow-left"}),"Kembali"]})}),(0,w.jsxs)("button",{className:"btn btn-primary",type:"submit",children:[(0,w.jsx)("i",{className:"fa-solid fa-paper-plane"}),"Simpan"]})]})]})})})})})})})}var U="https://sisappra-be.tsgitdev.com",K="".concat(U,"/sarana-prasarana");function J(){var a,n,e,t,c,d,f=(0,s.UO)().id,h=r.useState({}),v=(0,o.Z)(h,2),x=v[0],j=v[1];return(0,r.useEffect)((function(){var a=function(){var a=(0,i.Z)(u().mark((function a(){var n,e,r;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m().get("".concat(K,"/findone/").concat(f));case 2:n=a.sent,e=n.data.data,r={jenis_sarana_prasarana:{value:e.jenis_sarana_prasarana_id,label:e.jenis_sarana_prasarana_name},status_sarana_prasarana:{value:e.status_sarana_prasarana_id,label:e.status_sarana_prasarana_name},kondisi:{value:e.kondisi_id,label:e.kondisi_name},jumlah:e.jumlah,keterangan:e.keterangan,file_dokumentasi:e.dokumentasi,updated_by:""},j((function(a){return(0,l.Z)((0,l.Z)({},a),r)}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();a()}),[x,f]),(0,w.jsx)("div",{className:"app-main flex-column flex-row-fluid",id:"kt_app_main",children:(0,w.jsx)("div",{className:"d-flex flex-column flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content",className:"app-content flex-column-fluid",children:(0,w.jsx)("div",{id:"kt_app_content_container",className:"app-container container-xxl",children:(0,w.jsx)("div",{className:"card mb-3 mb-xl-2",children:(0,w.jsx)("div",{className:"card-body",children:(0,w.jsxs)("form",{children:[(0,w.jsxs)("div",{className:"row mt-2",children:[(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jenis Sarana & Prasarana"}),(0,w.jsx)("input",{className:"form-control form-control-solid",name:"jenis_sarpra",type:"text",value:0!==(null===x||void 0===x||null===(a=x.jenis_sarana_prasarana)||void 0===a?void 0:a.value)?null===x||void 0===x||null===(n=x.jenis_sarana_prasarana)||void 0===n?void 0:n.label:"",readOnly:!0})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Status Sarana & Prasarana"}),(0,w.jsx)("input",{className:"form-control form-control-solid",name:"stat_sarpra",type:"text",value:0!==(null===x||void 0===x||null===(e=x.status_sarana_prasarana)||void 0===e?void 0:e.value)?null===x||void 0===x||null===(t=x.status_sarana_prasarana)||void 0===t?void 0:t.label:"",readOnly:!0})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-4 col-lg-4 col-xl-4 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Kondisi"}),(0,w.jsx)("input",{className:"form-control form-control-solid",name:"kondisi",type:"text",value:0!==(null===x||void 0===x||null===(c=x.kondisi)||void 0===c?void 0:c.value)?null===x||void 0===x||null===(d=x.kondisi)||void 0===d?void 0:d.label:"",readOnly:!0})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"",className:"mb-3",children:"Jumlah"}),(0,w.jsx)("input",{className:"form-control form-control-solid",name:"jumlah",type:"number",min:"0",value:null!==x&&void 0!==x&&x.jumlah?null===x||void 0===x?void 0:x.jumlah:0,readOnly:!0})]})}),(0,w.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-6 col-xl-6 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"File Dokumentasi"}),(0,w.jsx)("div",{className:"card h-100 mt-3",children:(0,w.jsx)("div",{className:"card-body d-flex justify-content-center text-center flex-column p-4 border-gray-300 border-dotted",children:null!==x&&void 0!==x&&x.file_dokumentasi&&""!==(null===x||void 0===x?void 0:x.file_dokumentasi)?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("a",{className:"text-gray-800 text-hover-primary d-flex flex-column",target:"_blank",rel:"noreferrer",href:"".concat(U,"/").concat(null===x||void 0===x?void 0:x.file_dokumentasi),children:[(0,w.jsxs)("div",{className:"symbol symbol-75px mb-5",children:[(0,w.jsx)(A.D8,{className:"theme-light-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil003.svg"}),(0,w.jsx)(A.D8,{className:"theme-dark-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil003.svg"})]}),(0,w.jsx)("div",{className:"fs-5 fw-bold mb-2",children:"File Dokumentasi"})]})}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"text-gray-800 text-hover-primary d-flex flex-column",children:[(0,w.jsxs)("div",{className:"symbol symbol-75px mb-5",children:[(0,w.jsx)(A.D8,{className:"theme-light-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil007.svg"}),(0,w.jsx)(A.D8,{className:"theme-dark-show svg-icon svg-icon-5x me-1",path:"/media/icons/duotune/files/fil007.svg"})]}),(0,w.jsx)("div",{className:"fs-5 fw-bold mb-2",children:"Tidak ada file dokumentasi..."})]})})})})]})}),(0,w.jsx)("div",{className:"col-12 mb-6",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)(C.Z.Label,{children:"Keterangan"}),(0,w.jsx)(C.Z.Control,{as:"textarea",name:"keterangan",className:"form-control form-control-solid",value:null!==x&&void 0!==x&&x.keterangan?null===x||void 0===x?void 0:x.keterangan:"",readOnly:!0})]})})]}),(0,w.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-center",children:(0,w.jsx)(p.rU,{to:"/sarana_prasarana/LaporanSaranaPrasarana",children:(0,w.jsxs)("button",{className:"btn btn-secondary",children:[(0,w.jsx)("i",{className:"fa-solid fa-arrow-left"}),"Kembali"]})})})]})})})})})})})}var I=[{title:"Sarana & Prasarana",path:"/sarana_prasarana/LaporanSaranaPrasarana",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],R=function(){return(0,w.jsx)(s.Z5,{children:(0,w.jsxs)(s.AW,{element:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.j3,{})}),children:[(0,w.jsx)(s.AW,{path:"LaporanSaranaPrasarana",element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.V1,{breadcrumbs:I,children:"Laporan Sarana & Prasarana"}),(0,w.jsx)(S,{})]})}),(0,w.jsx)(s.AW,{path:"LaporanSaranaPrasarana/TambahLaporanSarana",element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.V1,{breadcrumbs:I,children:"Tambah Laporan Sarana"}),(0,w.jsx)(O,{})]})}),(0,w.jsx)(s.AW,{path:"LaporanSaranaPrasarana/UbahLaporanSarana/:id",element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.V1,{breadcrumbs:I,children:"Ubah Laporan Sarana"}),(0,w.jsx)(B,{})]})}),(0,w.jsx)(s.AW,{path:"LaporanSaranaPrasarana/LihatLaporanSarana/:id",element:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.V1,{breadcrumbs:I,children:"Lihat Laporan Sarana"}),(0,w.jsx)(J,{})]})}),(0,w.jsx)(s.AW,{index:!0,element:(0,w.jsx)(s.Fg,{to:"/sarana_prasarana"})})]})})}}}]);
//# sourceMappingURL=311.4d7c3834.chunk.js.map